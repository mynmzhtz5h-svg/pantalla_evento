<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SubÃ­ tu foto</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#000;
  color:#fff;
  font-family:system-ui;
}

form{
  width:90%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

input,button{
  padding:14px;
  font-size:18px;
  border-radius:10px;
  border:none;
}

button{
  background:#00c2ff;
  font-weight:700;
}
</style>
</head>

<body>

<form id="f">
  <input id="nombre" placeholder="Tu nombre" required>
  <input id="mensaje" placeholder="Mensaje (opcional)">
  <input id="foto" type="file" accept="image/*" required>
  <button>Subir foto ðŸ“¸</button>
</form>

<script>
const CLOUD = "craneosuy";
const PRESET = "evento_unsigned";

document.getElementById("f").onsubmit = async e =>{
  e.preventDefault();

  const n = nombre.value.trim().replace(/\s+/g,"_");
  const m = mensaje.value.trim().replace(/\s+/g,"_");

  const fd = new FormData();
  fd.append("file", foto.files[0]);
  fd.append("upload_preset", PRESET);
  fd.append("public_id", `evento___${n}___${m}`);

  await fetch(`https://api.cloudinary.com/v1_1/${CLOUD}/image/upload`,{
    method:"POST",
    body:fd
  });

  alert("Foto enviada ðŸ™Œ");
  f.reset();
};
</script>

</body>
</html>
